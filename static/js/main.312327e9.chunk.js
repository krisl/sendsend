(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,n,o){e.exports=o(15)},,,,,,function(e,n,o){},function(e,n){function o(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=13},function(e,n,o){},function(e,n,o){"use strict";o.r(n);var t=o(0),a=o.n(t),r=o(4),l=o.n(r),c=(o(12),o(2)),i=o(1),s=o(5),d=o.n(s);o(14);function u(e){e.preventDefault(),e.stopPropagation()}var m=function(){var e=window.location.hash;if(e&&"string"===typeof e)return e.replace(/\W/g,"")};var f=function(){var e=Object(t.useState)({loading:!0}),n=Object(i.a)(e,2),o=n[0],r=n[1],l=Object(t.useState)(),s=Object(i.a)(l,2),f=s[0],g=s[1],p=Object(t.useState)(),v=Object(i.a)(p,2),E=v[0],w=v[1];return Object(t.useEffect)(function(){var e=new d.a;console.log({session:e}),e.on("open",function(n){console.log({id:n}),r({loading:!1,id:n,session:e});var o=m();o&&(console.log("need to connect to "+o),function(n){var o=e.connect(n,{label:"FILE"}),t=e.connect(n,{label:"DATA"});r(function(e){return Object(c.a)({},e,{loading:!1,waiting:!0})}),o.on("open",function(e){console.log("file connection open",e),o.on("data",function(e){console.log("fdata",{d:e});var n=e.file;if(n&&n.constructor===ArrayBuffer){var o=new Uint8Array(n),t=new Blob([o],{type:e.type}),a=window.URL.createObjectURL(t);r(function(n){return Object(c.a)({},n,{completed:!0,url:a,type:e.type,size:e.size,name:e.name,dataBlob:t})})}else console.log("oops")})}),t.on("open",function(e){console.log("data connection open",e),t.on("data",function(e){return console.log("ddata",{d:e})})}),o.on("error",function(e){return console.log("file error",e)}),t.on("error",function(e){return console.log("data error",e)})}(o))})},[]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{id:"droparea",style:console.log({sessionState:o})||o.waiting||"WAITING"===f?{display:"none"}:{},onDragOver:function(e){console.log("dragover"),u(e)},onDragEnter:function(e){console.log("dragenter",e),g("HOVER"),u(e)},onDragLeave:function(e){console.log("dragleave",e),g(),u(e)},onDrop:function(e){console.log("drop",e),console.log("files",e.dataTransfer.files.length);var n=!0,t=!1,a=void 0;try{for(var l,i=e.dataTransfer.files[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var s=l.value;console.log(s)}}catch(f){t=!0,a=f}finally{try{n||null==i.return||i.return()}finally{if(t)throw a}}var d,m=e.dataTransfer.files[0];g("WAITING"),w(m),d=m,o.session.on("connection",function(e){"FILE"===e.label&&(console.log("incomming file connection"),r(function(e){return Object(c.a)({},e,{loading:!1,transferring:!0})}),e.on("open",function(n){console.log("incomming file connection open",e),e.send({file:d,name:d.name,size:d.size,type:d.type})})),"DATA"===e.label&&(console.log("incomming data connection"),e.on("open",function(){console.log("incomming data connection open",e),e.send({name:"bobx"})}))}),u(e),e.persist()}}),a.a.createElement("div",{id:"container"},a.a.createElement("div",{id:"header"},a.a.createElement("h1",null,"SendSend"),a.a.createElement("h2",null,"Peer to peer single file transfer")),a.a.createElement("div",{id:"status",className:o.id?"HOVER"===f?"hover":o.waiting?"...waiting":"ready":""},a.a.createElement("div",{id:"status-inner"},a.a.createElement("span",{id:"status-text"},o.loading?a.a.createElement("p",{className:"loading"},"Loading..."):"HOVER"===f?"Drop it!":"WAITING"===f?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,E.name),a.a.createElement("p",null,E.size),a.a.createElement("p",null,E.type)):"id: ".concat(o.id)))),a.a.createElement("div",{id:"progress"},a.a.createElement("div",{id:"progress-first"}),a.a.createElement("div",{id:"progress-second"})),a.a.createElement("div",{id:"message",className:"WAITING"===f||o.completed?"open":""},a.a.createElement("span",{id:"message-text"},("WAITING"===f||o.completed)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"icon"},"\u2714"),"File is ready ",o.completed&&a.a.createElement("span",null,o.type," ",o.size," -",a.a.createElement("a",{target:"_blank",className:"link",href:o.url,download:o.name},"Click here to download")),"WAITING"===f&&a.a.createElement("span",{id:"share",className:"link"},"".concat(document.URL,"#").concat(o.id)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.312327e9.chunk.js.map