(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,n,t){e.exports=t(15)},,,,,,function(e,n,t){},function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=13},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),i=t(4),r=t.n(i),l=(t(12),t(1)),c=t(2),s=t(5),d=t.n(s);t(14);function u(e){e.preventDefault(),e.stopPropagation()}var f=function(){var e=window.location.hash;if(e&&"string"===typeof e)return e.replace(/\W/g,"")};var g=function(){var e=Object(o.useState)({state:"registering"}),n=Object(c.a)(e,2),t=n[0],i=n[1],r=Object(o.useState)(),s=Object(c.a)(r,2),g=s[0],m=s[1];return Object(o.useEffect)(function(){var e=new d.a(void 0,{debug:3});console.log({session:e}),e.on("open",function(n){console.log({id:n});var t=f();i({state:t?"connectingToHost":"waitingForFileSelection",id:n,session:e}),t&&(console.log("need to connect to "+t),function(n){var t=e.connect(n,{label:"FILE",reliable:!0}),o=e.connect(n,{label:"DATA"});i(function(e){return Object(l.a)({},e,{state:"waitingToReceive"})}),t.on("open",function(e){console.log("file connection open",e),t.on("data",function(e){console.log("fdata",{d:e});var n=e.file;if(n&&n.constructor===ArrayBuffer){var t=new Uint8Array(n),o=new Blob([t],{type:e.type}),a=window.URL.createObjectURL(o);i(function(n){return Object(l.a)({},n,{state:"completed",url:a,type:e.type,size:e.size,name:e.name,dataBlob:o})})}else console.log("oops")})}),o.on("open",function(e){console.log("data connection open",e),o.on("data",function(e){return console.log("ddata",{d:e})})}),t.on("error",function(e){return console.log("file error",e)}),o.on("error",function(e){return console.log("data error",e)})}(t))})},[]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{id:"droparea",style:"waitingForFileSelection"===t.state?{}:{display:"none"},onDragOver:function(e){console.log("dragover"),u(e)},onDragEnter:function(e){console.log("dragenter",e),m("HOVER"),u(e)},onDragLeave:function(e){console.log("dragleave",e),m(),u(e)},onDrop:function(e){console.log("drop",e),console.log("files",e.dataTransfer.files.length);var n=!0,o=!1,a=void 0;try{for(var r,c=e.dataTransfer.files[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var s=r.value;console.log(s)}}catch(f){o=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}var d=e.dataTransfer.files[0];m(),i(function(e){return Object(l.a)({},e,{state:"waitingForClientConnections",file:d})}),function(e){t.session.on("connection",function(n){"FILE"===n.label&&(console.log("incomming file connection"),i(function(e){return Object(l.a)({},e,{state:"transferring"})}),n.on("open",function(t){console.log("incomming file connection open",n),n.send({file:e,name:e.name,size:e.size,type:e.type}),i(function(e){return Object(l.a)({},e,{state:"waitingForClientConnections"})})})),"DATA"===n.label&&(console.log("incomming data connection"),n.on("open",function(){console.log("incomming data connection open",n),n.send({name:"bobx"})}))})}(d),u(e),e.persist()}}),a.a.createElement("div",{id:"container"},a.a.createElement("div",{id:"header"},a.a.createElement("h1",null,"SendSend"),a.a.createElement("h2",null,"Peer to peer single file transfer")),a.a.createElement("div",{id:"status",className:t.id?"HOVER"===g?"hover":"waitingToReceive"===t.state?"waiting":"ready":""},a.a.createElement("div",{id:"status-inner"},a.a.createElement("span",{id:"status-text"},"loading"===t.state?a.a.createElement("p",{className:"loading"},"Loading..."):"waitingForClientConnections"===t.state?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,t.file.name),a.a.createElement("p",null,t.file.size),a.a.createElement("p",null,t.file.type)):"transferring"===t.state?"transferring...":"HOVER"===g?"Drop it!":"id: ".concat(t.id)))),a.a.createElement("div",{id:"progress"},a.a.createElement("div",{id:"progress-first"}),a.a.createElement("div",{id:"progress-second"})),a.a.createElement("div",{id:"message",className:"waitingForClientConnections"===t.state||"completed"===t.state?"open":""},a.a.createElement("span",{id:"message-text"},("waitingForClientConnections"===t.state||"completed"===t.state)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"icon"},"\u2714"),"File is ready ","completed"===t.state&&a.a.createElement("span",null,t.type," ",t.size," -",a.a.createElement("a",{target:"_blank",className:"link",href:t.url,download:t.name},"Click here to download")),"waitingForClientConnections"===t.state&&a.a.createElement("span",{id:"share",className:"link"},"".concat(document.URL,"#").concat(t.id)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.9b9fb036.chunk.js.map